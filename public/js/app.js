"use strict";function Router(t,e){t.state("usersIndex",{url:"/users",templateUrl:"/templates/usersIndex.html",controller:"UsersIndexController as user"}).state("linesIndex",{url:"/lines",templateUrl:"/templates/linesIndex.html",controller:"LinesIndexController as linesIndex"}).state("linesShow",{url:"/lines/:tflId",templateUrl:"/templates/linesShow.html",controller:"LinesShowController as linesShow"}).state("register",{url:"/register",templateUrl:"/templates/register.html",controller:"RegisterController as register"}).state("login",{url:"/login",templateUrl:"/templates/login.html",controller:"LoginController as login"}).state("confirm",{url:"/confirm/:confirmationCode",templateUrl:"/templates/confirm.html",controller:"ConfirmController as confirm"}),e.otherwise("/lines")}function Auth(t){t.loginUrl="/login",t.signupUrl="/register",t.tokenPrefix="",t.facebook({clientId:"360279380977935"})}function RegisterController(t,e){function n(){t.signup(o.user).then(function(){e.go("login")})}var o=this;o.user={},o.submit=n}function ConfirmationController(t,e){t({method:"POST",url:"/confirm/"+e.params.confirmationCode}).then(function(){e.go("login")})}function LoginController(t,e){function n(){t.login(r.credentials).then(function(){e.go("linesIndex")})}function o(e){t.authenticate(e).then(function(t){console.log(t)})}var r=this;r.credentials={},r.submit=n,r.authenticate=o}function LinesIndexController(t){var e=this;e.all=[],t.getStatuses().then(function(t){e.all=t})}function LinesShowController(t,e,n){function o(){e({method:"GET",url:"/tweets",params:{q:n.params.tflId}}).then(function(t,e){return e?void console.log("Something went wrong, run away from ",e):(r.tweets=t.data.statuses,void console.log(r.tweets))})}var r=this;r.tweets=[],t.getStatuses().then(function(t){r.line=t.filter(function(t){return t.tflId===n.params.tflId})[0]}),o()}function TFL(t){function e(){return t.get("/status").then(function(t){return t.data})}this.getStatuses=e}function User(t){return new t("/users/:id",{id:"@_id"},{update:{method:"PUT"}})}function UsersIndexController(t){var e=this;e.all=t.query()}angular.module("twitterForLondon",["ngResource","ui.router","satellizer","ngSanitize"]).config(Router).config(Auth),Router.$inject=["$stateProvider","$urlRouterProvider"],Auth.$inject=["$authProvider"],angular.module("twitterForLondon").controller("RegisterController",RegisterController).controller("LoginController",LoginController).controller("ConfirmController",ConfirmationController),RegisterController.$inject=["$auth","$state"],ConfirmationController.$inject=["$http","$state"],LoginController.$inject=["$auth","$state"],angular.module("twitterForLondon").controller("LinesIndexController",LinesIndexController).controller("LinesShowController",LinesShowController),LinesIndexController.$inject=["TFL"],LinesShowController.$inject=["TFL","$http","$state"],angular.module("twitterForLondon").service("TFL",TFL),TFL.$inject=["$http"],angular.module("twitterForLondon").factory("User",User),User.$inject=["$resource"],angular.module("twitterForLondon").controller("UsersIndexController",UsersIndexController),UsersIndexController.$inject=["User"];
//# sourceMappingURL=app.js.map
